<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Comments</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
</head>
<body>
    <main>
         <!-- =================start Logo========================= -->
    <div class="logo-navbar" id="home">
        <a href="#home">
          <img src="image/logo(withoutbackground).png" width="200" height="200" alt="Azoom Car Rental Logo">
        </a>
      </div>
      <!-- =================End Logo========================= -->
        <!-- =================Start navbar========================= -->
    <nav class="navbar">
        <ul class="top-nav-uil">
          <div class="navbar-middle">
          <li class="top-nav-li"><a href="welcomeadminpage.html">Home</a></li>
          <li class="top-nav-li"><a href="returnedpageadmin.html">Returned car</a></li>
          <li class="top-nav-li"><a href="display_report.html">View car report</a></li> 
        </ul>
    </nav>
      
        <h1>User Details and Returned Car Information</h1>
        <div id="userList"></div>
    </main>
     <!-- =================Start navbar========================= -->
     <footer>
        <div class="footer-leftside">
          <img src="image/logo(withoutbackground).png" width="200" height="200" alt="Azoom Car Rental Logo">
          <h2 class="footer-company-name">Azoom car rental Â© 2024</h2>
        </div>
        
        <div class="footer-middle">
          <div>
            <i class="fa fa-map-marker"></i>
            <p><span>463 Clementi Rd, Singapore 599494</span></p>
          </div>
          <div>
            <i class="fa fa-phone"></i>
            <p>+65 6248 9777</p>
          </div>
          <div>
            <i class="fa fa-envelope"></i>
            <p><a href="mailto:support@company.com">support@Azoomcarrental.com</a></p>
          </div>
        </div>
        
        <div class="footer-rightside">
          <p class="footer-company-about">
            <span>About the company</span>
            Lorem ipsum dolor sit amet, consectateur adispicing elit. Fusce euismod convallis velit, eu auctor lacus vehicula sit amet.
          </p>
          <div class="footer-icons">
            <a href="https://www.facebook.com/"><i class="fa fa-facebook"></i></a>
            <a href="https://www.twitter.com/"><i class="fa fa-twitter"></i></a>
            <a href="https://www.instagram.com/"><i class="fa fa-instagram"></i></a>
          </div>
        </div>
      </footer>
      
    <script>
        const userList = document.getElementById("userList");

        // Retrieve users from local storage
        const existingUsers = JSON.parse(localStorage.getItem("users")) || [];

        // Check if there are any user entries
        if (existingUsers.length === 0) {
            userList.innerHTML = "<p>No users available.</p>";
        } else {
            existingUsers.forEach((item, index) => {
                const userItem = document.createElement("div");
                userItem.classList.add("user-item");
                userItem.innerHTML = `
                    <strong>${item.fullName}</strong> <em>${item.date}</em>
                    <p>Car Plate: ${item.carPlate}</p>
                    <p>Location: ${item.carLocation}</p>
                    <p>Pickup File: ${item.pickupCar || 'Not provided'}</p>
                    <p>Return File: ${item.returnCar || 'Not provided'}</p>
                    <button onclick="deleteEntry(${index})">Delete</button>
                    <button onclick="goToCommentForm(${index})">Check</button>
                `;
                userList.appendChild(userItem);
            });
        }

        function deleteEntry(index) {
            const existingUsers = JSON.parse(localStorage.getItem("users")) || [];
            existingUsers.splice(index, 1); // Remove the entry
            localStorage.setItem("users", JSON.stringify(existingUsers)); // Update local storage
            window.location.reload(); // Refresh the page
        }

        function goToCommentForm(index) {
            const selectedUser = existingUsers[index];
            localStorage.setItem("selectedUser", JSON.stringify(selectedUser)); // Store selected user data
            window.location.href = 'comment.html'; // Navigate to comment form page
        }
    </script>
</body>
</html>
