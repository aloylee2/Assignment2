<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Reservation Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
    <script src="script.js"></script>
</head>
<body>
    <main>
      <!-- =================start Logo========================= -->
      <div class="logo-navbar" id="home">
        <a href="#home">
          <img src="image/logo(withoutbackground).png" width="200" height="200" alt="Azoom Car Rental Logo">
        </a>
      </div>
      <!-- =================End Logo========================= -->
      
      <!-- =================Start navbar========================= -->
    <nav class="navbar">
        <ul class="top-nav-uil">
          <div class="navbar-middle">
          <li class="top-nav-li"><a href="#home">Home</a></li>
          <li class="top-nav-li"><a href="carselection.html">View car</a></li>
          <li class="top-nav-li"><a href="display_report.html">View car report</a></li>
        </ul>
    </nav>
    </div>
      <!-- =================end navbar========================= -->
      
      <section class="reserve_page">
        <div class="container-summary">
            <h1>Car Reservation Form</h1>
            <form id="reserve_page_reservationForm" onsubmit="handleSubmitReserve(event)">
                <label for="reserve_page_fullName">Full Name</label>
                <input type="text" id="reserve_page_fullName" placeholder="Your Full Name" required>
    
                <label for="reserve_page_email">Email</label>
                <input type="email" id="reserve_page_email" placeholder="Your Email" required>
    
                <label for="reserve_page_carModel">Car Model</label>
                <input type="text" id="reserve_page_carModel" placeholder="Car Model" readonly>
    
                <label for="reserve_page_carPrice">Car Price</label>
                <input type="text" id="reserve_page_carPrice" placeholder="Car Price" readonly>
    
                <label for="reserve_page_pickupDate">Pickup Date</label>
                <input type="date" id="reserve_page_pickupDate" required onchange="updateDropDateLimits()">
    
                <label for="reserve_page_pickupTime">Pickup Time</label>
                <input type="time" id="reserve_page_pickupTime" required>
    
                <label for="reserve_page_dropDate">Drop Date</label>
                <input type="date" id="reserve_page_dropDate" required>
    
                <label for="reserve_page_dropTime">Drop Time</label>
                <input type="time" id="reserve_page_dropTime" required>
    
                <label for="reserve_page_creditNumber">Credit Number</label>
                <input type="text" id="reserve_page_creditNumber" placeholder="Credit Card Number" required pattern="[\d\s]{13,19}" title="Enter a valid credit card number">
    
                <label for="reserve_page_drivingLicense">Driving License Number</label>
                <input type="text" id="reserve_page_drivingLicense" placeholder="Driving License Number" required>
    
                <button type="submit" id="reserve_page_button" >Reserve Car</button>
            </form>
            <div id="reserve_page_errorMessage" class="reserve_page_error"></div>
        </div>
      </section>
    </main>
    
    <footer>
      <div class="footer-leftside">
        <img src="image/logo(withoutbackground).png" width="200" height="200" alt="Azoom Car Rental Logo">
        <h2 class="footer-company-name">Azoom car rental Â© 2024</h2>
      </div>
      
      <div class="footer-middle">
        <div>
          <i class="fa fa-map-marker"></i>
          <p><span>463 Clementi Rd, Singapore 599494</span></p>
        </div>
        <div>
          <i class="fa fa-phone"></i>
          <p>+65 6248 9777</p>
        </div>
        <div>
          <i class="fa fa-envelope"></i>
          <p><a href="mailto:support@company.com">support@Azoomcarrental.com</a></p>
        </div>
      </div>
      
      <div class="footer-rightside">
        <p class="footer-company-about">
          <span>About the company</span>
          Lorem ipsum dolor sit amet, consectateur adispicing elit. Fusce euismod convallis velit, eu auctor lacus vehicula sit amet.
        </p>
        <div class="footer-icons">
          <a href="https://www.facebook.com/"><i class="fa fa-facebook"></i></a>
          <a href="https://www.twitter.com/"><i class="fa fa-twitter"></i></a>
          <a href="https://www.instagram.com/"><i class="fa fa-instagram"></i></a>
        </div>
      </div>
    </footer>
   
    <script>
        const selectedCar = localStorage.getItem('selectedCar') || 'No car selected';
        const selectedPrice = localStorage.getItem('selectedPrice') || 'No price available';

        document.getElementById('reserve_page_carModel').value = selectedCar;
        document.getElementById('reserve_page_carPrice').value = selectedPrice;

//         function setMinPickupDate() {
//     const today = new Date();
//     const formattedToday = today.toISOString().split('T')[0];
//     document.getElementById('reserve_page_pickupDate').setAttribute('min', formattedToday);
// }

// function updateDropDateLimits() {
//     const pickupDate = document.getElementById('reserve_page_pickupDate').value;
//     const dropDateInput = document.getElementById('reserve_page_dropDate');

//     if (pickupDate) {
//         const pickupDateObj = new Date(pickupDate);
//         const minDropDate = new Date(pickupDateObj);
//         minDropDate.setDate(pickupDateObj.getDate() + 1);
//         const maxDropDate = new Date(pickupDateObj);
//         maxDropDate.setDate(pickupDateObj.getDate() + 7);

//         dropDateInput.setAttribute('min', minDropDate.toISOString().split('T')[0]);
//         dropDateInput.setAttribute('max', maxDropDate.toISOString().split('T')[0]);
//     }
// }

// function generateCarPlateNumber() {
//     const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
//     let plateNumber = '';
//     for (let i = 0; i < 7; i++) {
//         plateNumber += characters.charAt(Math.floor(Math.random() * characters.length));
//     }
//     return plateNumber;
// }

// function handleSubmit(event) {
//     event.preventDefault();
//     const errorMessageElement = document.getElementById('reserve_page_errorMessage');
//     errorMessageElement.innerText = ""; // Clear previous error messages

//     const pickupDate = document.getElementById('reserve_page_pickupDate').value;
//     const dropDate = document.getElementById('reserve_page_dropDate').value;

//     if (new Date(dropDate) <= new Date(pickupDate)) {
//         errorMessageElement.innerText = "Drop date must be after pickup date.";
//         return;
//     }

//     const creditCardNumber = document.getElementById('reserve_page_creditNumber').value;
//     const encryptedCreditCard = CryptoJS.AES.encrypt(creditCardNumber, 'your-secret-key').toString();

//     const reservationDetails = {
//         fullName: document.getElementById('reserve_page_fullName').value,
//         email: document.getElementById('reserve_page_email').value,
//         carModel: document.getElementById('reserve_page_carModel').value,
//         carPrice: document.getElementById('reserve_page_carPrice').value,
//         pickupDate: pickupDate,
//         pickupTime: document.getElementById('reserve_page_pickupTime').value,
//         dropDate: dropDate,
//         dropTime: document.getElementById('reserve_page_dropTime').value,
//         creditNumber: encryptedCreditCard,
//         drivingLicense: document.getElementById('reserve_page_drivingLicense').value,
//         carPlateNumber: generateCarPlateNumber(),
//     };

//     const lastFourDigits = creditCardNumber.slice(-4);
//     const fileContent = `Full Name: ${reservationDetails.fullName}\nEmail: ${reservationDetails.email}\nCar Model: ${reservationDetails.carModel}\nCar Price: ${reservationDetails.carPrice}\nPickup Date: ${reservationDetails.pickupDate}\nPickup Time: ${reservationDetails.pickupTime}\nDrop Date: ${reservationDetails.dropDate}\nDrop Time: ${reservationDetails.dropTime}\nCredit Number: **** **** **** ${lastFourDigits}\nDriving License: ${reservationDetails.drivingLicense}\nCar Plate Number: ${reservationDetails.carPlateNumber}`;

//     const blob = new Blob([fileContent], { type: 'text/plain' });
//     const url = URL.createObjectURL(blob);

//     const a = document.createElement('a');
//     a.href = url;
//     a.download = `car_reservation_${reservationDetails.fullName}.txt`;
//     document.body.appendChild(a);
//     a.click();

//     setTimeout(() => {
//         document.body.removeChild(a);
//         URL.revokeObjectURL(url);
//     }, 0);

//     const queryString = new URLSearchParams(reservationDetails).toString();
//     window.location.href = `summary_page.html?${queryString}`;
//}

// window.onload = () => {
//     setMinPickupDate();
//     updateDropDateLimits();
// };


    </script>
  </body>


</html>
